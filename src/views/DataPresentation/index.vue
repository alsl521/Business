<template>
  <!--  <div></div>-->
  <div id="main" class="showData"></div>
</template>

<script setup lang="ts" name="DataPresentation">
import {ref, onMounted, onBeforeUnmount} from "vue";
import * as echarts from "echarts";

type EChartsOption = echarts.EChartsOption;
var chartDom = document.getElementById('main');
var myChart = ref(null);
var option: EChartsOption;

// prettier-ignore
let timeData = [
'2019/1/1 00:00:00', '2019/1/2 00:00:00', '2019/1/3 00:00:00', '2019/1/4 00:00:00', '2019/1/5 00:00:00', '2019/1/6 00:00:00', '2019/1/7 00:00:00', '2019/1/8 00:00:00', '2019/1/9 00:00:00', '2019/1/10 00:00:00', '2019/1/11 00:00:00', '2019/1/12 00:00:00', '2019/1/13 00:00:00', '2019/1/14 00:00:00', '2019/1/15 00:00:00', '2019/1/16 00:00:00', '2019/1/17 00:00:00', '2019/1/18 00:00:00', '2019/1/19 00:00:00', '2019/1/20 00:00:00', '2019/1/21 00:00:00', '2019/1/22 00:00:00', '2019/1/23 00:00:00', '2019/1/24 00:00:00', '2019/1/25 00:00:00', '2019/1/26 00:00:00', '2019/1/27 00:00:00', '2019/1/28 00:00:00', '2019/1/29 00:00:00', '2019/1/30 00:00:00', '2019/1/31 00:00:00', '2019/2/1 00:00:00', '2019/2/2 00:00:00', '2019/2/3 00:00:00', '2019/2/4 00:00:00', '2019/2/5 00:00:00', '2019/2/6 00:00:00', '2019/2/7 00:00:00', '2019/2/8 00:00:00', '2019/2/9 00:00:00', '2019/2/10 00:00:00', '2019/2/11 00:00:00', '2019/2/12 00:00:00', '2019/2/13 00:00:00', '2019/2/14 00:00:00', '2019/2/15 00:00:00', '2019/2/16 00:00:00', '2019/2/17 00:00:00', '2019/2/18 00:00:00', '2019/2/19 00:00:00', '2019/2/20 00:00:00', '2019/2/21 00:00:00', '2019/2/22 00:00:00', '2019/2/23 00:00:00', '2019/2/24 00:00:00', '2019/2/25 00:00:00', '2019/2/26 00:00:00', '2019/2/27 00:00:00', '2019/2/28 00:00:00', '2019/3/1 00:00:00', '2019/3/2 00:00:00', '2019/3/3 00:00:00', '2019/3/4 00:00:00', '2019/3/5 00:00:00', '2019/3/6 00:00:00', '2019/3/7 00:00:00', '2019/3/8 00:00:00', '2019/3/9 00:00:00', '2019/3/10 00:00:00', '2019/3/11 00:00:00', '2019/3/12 00:00:00', '2019/3/13 00:00:00', '2019/3/14 00:00:00', '2019/3/15 00:00:00', '2019/3/16 00:00:00', '2019/3/17 00:00:00', '2019/3/18 00:00:00', '2019/3/19 00:00:00', '2019/3/20 00:00:00', '2019/3/21 00:00:00', '2019/3/22 00:00:00', '2019/3/23 00:00:00', '2019/3/24 00:00:00', '2019/3/25 00:00:00', '2019/3/26 00:00:00', '2019/3/27 00:00:00', '2019/3/28 00:00:00', '2019/3/29 00:00:00', '2019/3/30 00:00:00', '2019/3/31 00:00:00', '2019/4/1 00:00:00', '2019/4/2 00:00:00', '2019/4/3 00:00:00', '2019/4/4 00:00:00', '2019/4/5 00:00:00', '2019/4/6 00:00:00', '2019/4/7 00:00:00', '2019/4/8 00:00:00', '2019/4/9 00:00:00', '2019/4/10 00:00:00', '2019/4/11 00:00:00', '2019/4/12 00:00:00', '2019/4/13 00:00:00', '2019/4/14 00:00:00', '2019/4/15 00:00:00', '2019/4/16 00:00:00', '2019/4/17 00:00:00', '2019/4/18 00:00:00', '2019/4/19 00:00:00', '2019/4/20 00:00:00', '2019/4/21 00:00:00', '2019/4/22 00:00:00', '2019/4/23 00:00:00', '2019/4/24 00:00:00', '2019/4/25 00:00:00', '2019/4/26 00:00:00', '2019/4/27 00:00:00', '2019/4/28 00:00:00', '2019/4/29 00:00:00', '2019/4/30 00:00:00', '2019/5/1 00:00:00', '2019/5/2 00:00:00', '2019/5/3 00:00:00', '2019/5/4 00:00:00', '2019/5/5 00:00:00', '2019/5/6 00:00:00', '2019/5/7 00:00:00', '2019/5/8 00:00:00', '2019/5/9 00:00:00', '2019/5/10 00:00:00', '2019/5/11 00:00:00', '2019/5/12 00:00:00', '2019/5/13 00:00:00', '2019/5/14 00:00:00', '2019/5/15 00:00:00', '2019/5/16 00:00:00', '2019/5/17 00:00:00', '2019/5/18 00:00:00', '2019/5/19 00:00:00', '2019/5/20 00:00:00', '2019/5/21 00:00:00', '2019/5/22 00:00:00', '2019/5/23 00:00:00', '2019/5/24 00:00:00', '2019/5/25 00:00:00', '2019/5/26 00:00:00', '2019/5/27 00:00:00', '2019/5/28 00:00:00', '2019/5/29 00:00:00', '2019/5/30 00:00:00', '2019/5/31 00:00:00', '2019/6/1 00:00:00', '2019/6/2 00:00:00', '2019/6/3 00:00:00', '2019/6/4 00:00:00', '2019/6/5 00:00:00', '2019/6/6 00:00:00', '2019/6/7 00:00:00', '2019/6/8 00:00:00', '2019/6/9 00:00:00', '2019/6/10 00:00:00', '2019/6/11 00:00:00', '2019/6/12 00:00:00', '2019/6/13 00:00:00', '2019/6/14 00:00:00', '2019/6/15 00:00:00', '2019/6/16 00:00:00', '2019/6/17 00:00:00', '2019/6/18 00:00:00', '2019/6/19 00:00:00', '2019/6/20 00:00:00', '2019/6/21 00:00:00', '2019/6/22 00:00:00', '2019/6/23 00:00:00', '2019/6/24 00:00:00', '2019/6/25 00:00:00', '2019/6/26 00:00:00', '2019/6/27 00:00:00', '2019/6/28 00:00:00', '2019/6/29 00:00:00', '2019/6/30 00:00:00', '2019/7/1 00:00:00', '2019/7/2 00:00:00', '2019/7/3 00:00:00', '2019/7/4 00:00:00', '2019/7/5 00:00:00', '2019/7/6 00:00:00', '2019/7/7 00:00:00', '2019/7/8 00:00:00', '2019/7/9 00:00:00', '2019/7/10 00:00:00', '2019/7/11 00:00:00', '2019/7/12 00:00:00', '2019/7/13 00:00:00', '2019/7/14 00:00:00', '2019/7/15 00:00:00', '2019/7/16 00:00:00', '2019/7/17 00:00:00', '2019/7/18 00:00:00', '2019/7/19 00:00:00', '2019/7/20 00:00:00', '2019/7/21 00:00:00', '2019/7/22 00:00:00', '2019/7/23 00:00:00', '2019/7/24 00:00:00', '2019/7/25 00:00:00', '2019/7/26 00:00:00', '2019/7/27 00:00:00', '2019/7/28 00:00:00', '2019/7/29 00:00:00', '2019/7/30 00:00:00', '2019/7/31 00:00:00', '2019/8/1 00:00:00', '2019/8/2 00:00:00', '2019/8/3 00:00:00', '2019/8/4 00:00:00', '2019/8/5 00:00:00', '2019/8/6 00:00:00', '2019/8/7 00:00:00', '2019/8/8 00:00:00', '2019/8/9 00:00:00', '2019/8/10 00:00:00', '2019/8/11 00:00:00', '2019/8/12 00:00:00', '2019/8/13 00:00:00', '2019/8/14 00:00:00', '2019/8/15 00:00:00', '2019/8/16 00:00:00', '2019/8/17 00:00:00', '2019/8/18 00:00:00', '2019/8/19 00:00:00', '2019/8/20 00:00:00', '2019/8/21 00:00:00', '2019/8/22 00:00:00', '2019/8/23 00:00:00', '2019/8/24 00:00:00', '2019/8/25 00:00:00', '2019/8/26 00:00:00', '2019/8/27 00:00:00', '2019/8/28 00:00:00', '2019/8/29 00:00:00', '2019/8/30 00:00:00', '2019/8/31 00:00:00', '2019/9/1 00:00:00', '2019/9/2 00:00:00', '2019/9/3 00:00:00', '2019/9/4 00:00:00', '2019/9/5 00:00:00', '2019/9/6 00:00:00', '2019/9/7 00:00:00', '2019/9/8 00:00:00', '2019/9/9 00:00:00', '2019/9/10 00:00:00', '2019/9/11 00:00:00', '2019/9/12 00:00:00', '2019/9/13 00:00:00', '2019/9/14 00:00:00', '2019/9/15 00:00:00', '2019/9/16 00:00:00', '2019/9/17 00:00:00', '2019/9/18 00:00:00', '2019/9/19 00:00:00', '2019/9/20 00:00:00', '2019/9/21 00:00:00', '2019/9/22 00:00:00', '2019/9/23 00:00:00', '2019/9/24 00:00:00', '2019/9/25 00:00:00', '2019/9/26 00:00:00', '2019/9/27 00:00:00', '2019/9/28 00:00:00', '2019/9/29 00:00:00', '2019/9/30 00:00:00', '2019/10/1 00:00:00', '2019/10/2 00:00:00', '2019/10/3 00:00:00', '2019/10/4 00:00:00', '2019/10/5 00:00:00', '2019/10/6 00:00:00', '2019/10/7 00:00:00', '2019/10/8 00:00:00', '2019/10/9 00:00:00', '2019/10/10 00:00:00', '2019/10/11 00:00:00', '2019/10/12 00:00:00', '2019/10/13 00:00:00', '2019/10/14 00:00:00', '2019/10/15 00:00:00', '2019/10/16 00:00:00', '2019/10/17 00:00:00', '2019/10/18 00:00:00', '2019/10/19 00:00:00', '2019/10/20 00:00:00', '2019/10/21 00:00:00', '2019/10/22 00:00:00', '2019/10/23 00:00:00', '2019/10/24 00:00:00', '2019/10/25 00:00:00', '2019/10/26 00:00:00', '2019/10/27 00:00:00', '2019/10/28 00:00:00', '2019/10/29 00:00:00', '2019/10/30 00:00:00', '2019/10/31 00:00:00', '2019/11/1 00:00:00', '2019/11/2 00:00:00', '2019/11/3 00:00:00', '2019/11/4 00:00:00', '2019/11/5 00:00:00', '2019/11/6 00:00:00', '2019/11/7 00:00:00', '2019/11/8 00:00:00', '2019/11/9 00:00:00', '2019/11/10 00:00:00', '2019/11/11 00:00:00', '2019/11/12 00:00:00', '2019/11/13 00:00:00', '2019/11/14 00:00:00', '2019/11/15 00:00:00', '2019/11/16 00:00:00', '2019/11/17 00:00:00', '2019/11/18 00:00:00', '2019/11/19 00:00:00', '2019/11/20 00:00:00', '2019/11/21 00:00:00', '2019/11/22 00:00:00', '2019/11/23 00:00:00', '2019/11/24 00:00:00', '2019/11/25 00:00:00', '2019/11/26 00:00:00', '2019/11/27 00:00:00', '2019/11/28 00:00:00', '2019/11/29 00:00:00', '2019/11/30 00:00:00', '2019/12/1 00:00:00', '2019/12/2 00:00:00', '2019/12/3 00:00:00', '2019/12/4 00:00:00', '2019/12/5 00:00:00', '2019/12/6 00:00:00', '2019/12/7 00:00:00', '2019/12/8 00:00:00', '2019/12/9 00:00:00', '2019/12/10 00:00:00', '2019/12/11 00:00:00', '2019/12/12 00:00:00', '2019/12/13 00:00:00', '2019/12/14 00:00:00', '2019/12/15 00:00:00', '2019/12/16 00:00:00', '2019/12/17 00:00:00', '2019/12/18 00:00:00', '2019/12/19 00:00:00', '2019/12/20 00:00:00', '2019/12/21 00:00:00', '2019/12/22 00:00:00', '2019/12/23 00:00:00', '2019/12/24 00:00:00', '2019/12/25 00:00:00', '2019/12/26 00:00:00', '2019/12/27 00:00:00', '2019/12/28 00:00:00', '2019/12/29 00:00:00', '2019/12/30 00:00:00', '2019/12/31 00:00:00'
]
option = {
  title: {
    text: 'Rainfall & Evaporation',
    left: 'center'
  },
  tooltip: {
    trigger: 'axis',
    axisPointer: {
      animation: false
    }
  },
  legend: {
    data: ['Evaporation', 'Rainfall'],
    left: 10
  },
  toolbox: {
    feature: {
      dataZoom: {
        yAxisIndex: 'none'
      },
      restore: {},
      saveAsImage: {}
    }
  },
  axisPointer: {
    link: [
      {
        xAxisIndex: 'all'
      }
    ]
  },
  dataZoom: [
    {
      show: true,
      realtime: true,
      start: 30,
      end: 70,
      xAxisIndex: [0, 1]
    },
    {
      type: 'inside',
      realtime: true,
      start: 30,
      end: 70,
      xAxisIndex: [0, 1]
    }
  ],
  grid: [
    {
      left: 60,
      right: 50,
      height: '35%'
    },
    {
      left: 60,
      right: 50,
      top: '55%',
      height: '35%'
    }
  ],
  xAxis: [
    {
      type: 'category',
      boundaryGap: false,
      axisLine: { onZero: true },
      data: timeData
    },
    {
      gridIndex: 1,
      type: 'category',
      boundaryGap: false,
      axisLine: { onZero: true },
      data: timeData,
      position: 'top'
    }
  ],
  yAxis: [
    {
      name: 'Evaporation(m/d)',
      type: 'value',
      max: 0.5
    },
    {
      gridIndex: 1,
      name: 'Rainfall(mm/d)',
      type: 'value',
      inverse: true
    }
  ],
  series: [
    {
      name: 'Evaporation',
      type: 'line',
      symbolSize: 8,
      // prettier-ignore
      data: [
      0.01153, 0.01153, 0.01153, 0.01153, 0.01153, 0.01153, 0.01153, 0.01153, 0.01153, 0.01153, 0.01153, 0.01153, 0.01153, 0.01153, 0.01153, 0.01153, 0.01153, 0.01153, 0.01153, 0.01153, 0.01153, 0.01153, 0.01153, 0.01153, 0.01153, 0.01153, 0.01153, 0.01153, 0.01153, 0.01153, 0.01153, 0.0133, 0.0133, 0.0133, 0.0133, 0.0133, 0.0133, 0.0133, 0.0133, 0.0133, 0.0133, 0.0133, 0.0133, 0.0133, 0.0133, 0.0133, 0.0133, 0.0133, 0.0133, 0.0133, 0.0133, 0.0133, 0.0133, 0.0133, 0.0133, 0.0133, 0.0133, 0.0133, 0.0133, 0.0133, 0.0133, 0.0133, 0.03143, 0.03143, 0.03143, 0.03143, 0.03143, 0.03143, 0.03143, 0.03143, 0.03143, 0.03143, 0.03143, 0.03143, 0.03143, 0.03143, 0.03143, 0.03143, 0.03143, 0.03143, 0.03143, 0.03143, 0.03143, 0.03143, 0.03143, 0.03143, 0.03143, 0.03143, 0.03143, 0.03143, 0.03143, 0.03143, 0.03143, 0.03933, 0.03933, 0.03933, 0.03933, 0.03933, 0.03933, 0.03933, 0.03933, 0.03933, 0.03933, 0.03933, 0.03933, 0.03933, 0.03933, 0.03933, 0.03933, 0.03933, 0.03933, 0.03933, 0.03933, 0.03933, 0.03933, 0.03933, 0.03933, 0.03933, 0.03933, 0.03933, 0.03933, 0.03933, 0.03933, 0.03933, 0.0531, 0.0531, 0.0531, 0.0531, 0.0531, 0.0531, 0.0531, 0.0531, 0.0531, 0.0531, 0.0531, 0.0531, 0.0531, 0.0531, 0.0531, 0.0531, 0.0531, 0.0531, 0.0531, 0.0531, 0.0531, 0.0531, 0.0531, 0.0531, 0.0531, 0.0531, 0.0531, 0.0531, 0.0531, 0.0531, 0.0531, 0.06, 0.06, 0.06, 0.06, 0.06, 0.06, 0.06, 0.06, 0.06, 0.06, 0.06, 0.06, 0.06, 0.06, 0.06, 0.06, 0.06, 0.06, 0.06, 0.06, 0.06, 0.06, 0.06, 0.06, 0.06, 0.06, 0.06, 0.06, 0.06, 0.06, 0.06, 0.06177, 0.06177, 0.06177, 0.06177, 0.06177, 0.06177, 0.06177, 0.06177, 0.06177, 0.06177, 0.06177, 0.06177, 0.06177, 0.06177, 0.06177, 0.06177, 0.06177, 0.06177, 0.06177, 0.06177, 0.06177, 0.06177, 0.06177, 0.06177, 0.06177, 0.06177, 0.06177, 0.06177, 0.06177, 0.06177, 0.06177, 0.0536, 0.0536, 0.0536, 0.0536, 0.0536, 0.0536, 0.0536, 0.0536, 0.0536, 0.0536, 0.0536, 0.0536, 0.0536, 0.0536, 0.0536, 0.0536, 0.0536, 0.0536, 0.0536, 0.0536, 0.0536, 0.0536, 0.0536, 0.0536, 0.0536, 0.0536, 0.0536, 0.0536, 0.0536, 0.0536, 0.0536, 0.03983, 0.03983, 0.03983, 0.03983, 0.03983, 0.03983, 0.03983, 0.03983, 0.03983, 0.03983, 0.03983, 0.03983, 0.03983, 0.03983, 0.03983, 0.03983, 0.03983, 0.03983, 0.03983, 0.03983, 0.03983, 0.03983, 0.03983, 0.03983, 0.03983, 0.03983, 0.03983, 0.03983, 0.03983, 0.03983, 0.03983, 0.02637, 0.02637, 0.02637, 0.02637, 0.02637, 0.02637, 0.02637, 0.02637, 0.02637, 0.02637, 0.02637, 0.02637, 0.02637, 0.02637, 0.02637, 0.02637, 0.02637, 0.02637, 0.02637, 0.02637, 0.02637, 0.02637, 0.02637, 0.02637, 0.02637, 0.02637, 0.02637, 0.02637, 0.02637, 0.02637, 0.02637, 0.01677, 0.01677, 0.01677, 0.01677, 0.01677, 0.01677, 0.01677, 0.01677, 0.01677, 0.01677, 0.01677, 0.01677, 0.01677, 0.01677, 0.01677, 0.01677, 0.01677, 0.01677, 0.01677, 0.01677, 0.01677, 0.01677, 0.01677, 0.01677, 0.01677, 0.01677, 0.01677, 0.01677, 0.01677, 0.01677, 0.01677, 0.01187, 0.01187, 0.01187, 0.01187, 0.01187, 0.01187, 0.01187, 0.01187, 0.01187, 0.01187, 0.01187, 0.01187, 0.01187, 0.01187, 0.01187, 0.01187, 0.01187, 0.01187, 0.01187, 0.01187, 0.01187, 0.01187, 0.01187, 0.01187
            ]
    },
    {
      name: 'Rainfall',
      type: 'line',
      xAxisIndex: 1,
      yAxisIndex: 1,
      symbolSize: 8,
      // prettier-ignore
      data: [
      0, 0.03, 0.91, 0, 0, 0, 0, 3.02, 0.15, 0.15, 0, 0, 0, 0, 0, 0, 0, 0.09, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 7.29, 2.47, 0, 0, 0, 0, 0, 0.01, 0.01, 0.25, 0.01, 1.13, 0, 0, 4.34, 2.7, 0, 0, 0, 0.39, 0, 0, 0, 0, 0, 0, 0, 0.02, 0, 0, 0.22, 2.18, 0.37, 0, 0, 0, 0, 0, 0, 0.04, 0.02, 0, 0, 0, 0, 0, 0, 0, 0, 0.65, 0.01, 0, 0, 0, 0, 0, 0, 0.04, 0, 0, 0, 0, 0.01, 0, 0, 0, 0, 0.25, 0.03, 9.86, 0, 0, 0.24, 0.4, 0.1, 0, 1.85, 0, 0, 0.13, 0.13, 6.42, 3.2, 0.09, 0.25, 2.95, 0.07, 2.91, 2.3, 3.06, 0, 0, 0.01, 0, 0.51, 0.17, 0, 0, 0.02, 0.02, 0.11, 0.14, 1.38, 0, 0.03, 0.05, 0.01, 0.01, 0, 0.02, 0, 0, 0, 0, 0, 0, 0.02, 0, 0.08, 0, 0.99, 0.01, 0, 0.01, 0.69, 0.28, 16.82, 11.26, 0.07, 0.09, 0, 0, 0, 0, 0, 0.01, 0, 0.01, 0.11, 0.13, 0.42, 34.35, 0.87, 0.12, 0.28, 0, 0.15, 0, 0.12, 20.28, 0.03, 0, 0, 0.04, 0.02, 0.24, 0.01, 0.01, 0, 0.05, 1.21, 6.36, 0.11, 7.53, 0.02, 1.74, 0.03, 0.01, 12.13, 0.64, 0, 0.69, 0.03, 0.61, 0.4, 0.78, 0.33, 12.04, 1.84, 20.77, 2.13, 7.2, 0.3, 11.19, 6.59, 1.1, 6.15, 1.66, 37.53, 3.95, 0.02, 5.54, 12.73, 3.25, 2.99, 0.06, 19.08, 0.06, 0, 0.04, 0, 0, 0.2, 7.93, 0.11, 0.01, 0.01, 0.47, 0.15, 0.86, 0.01, 0, 0, 0.04, 0.05, 1.37, 0.19, 0, 0, 0, 0, 0, 0.01, 1.26, 17.34, 3.3, 0.54, 0.57, 19.48, 0.96, 11.32, 0.04, 0.4, 0.25, 0.01, 0, 0, 0.01, 0, 0.02, 0.05, 0, 0, 0, 0, 0.02, 0.3, 7.07, 12.97, 26, 0.25, 0.07, 19.08, 2.39, 0.21, 0.26, 0.08, 1.1, 0.26, 1.54, 0, 0, 0, 0, 0.03, 0.48, 0.13, 0, 0.01, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.1, 0.11, 0, 0.01, 0.54, 0, 0, 0, 3.06, 0.01, 0, 0.01, 0.01, 0, 0.01, 0.54, 0.03, 0, 0.05, 0, 0.02, 0.06, 0.1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.01, 4.33, 1.88, 0.01, 0, 0, 0, 0, 0, 0, 0, 0.19, 0.01, 0, 0.02, 0.02, 0, 0, 0
            ]
    }
  ]
};


//挂载数据
onMounted(() => {
  const chartDom = document.getElementById('main');
  myChart = echarts.init(chartDom);
  option && myChart.setOption(option);
});

//监听窗口变化
window.addEventListener('resize', function () {
  myChart.resize();
});

//销毁Echatrs
onBeforeUnmount(() => {
  myChart.dispose();
  console.log(myChart);
})


</script>

<style scoped>
.showData {
  height: calc(100vh - 100px);
  width: calc(100vw - 250px);
}
</style>